# سناریوهای کلیدی استفاده

## ۱. همگام‌سازی سوابق سلامت شخصی
**بازیگران:** کاربر، ایجنت سلامت، سامانهٔ مراقبت.
**جریان اصلی:**
1. کاربر با احراز هویت دوعاملی وارد پرتال شده و Scope «health.read/write» با حساسیت «high» را به ایجنت سلامت می‌دهد.
2. ایجنت نسخهٔ خلاصه‌شدهٔ پروندهٔ پزشکی را با برچسب حساسیت «high» در API `/v1/memory/{user}/entries` ثبت می‌کند.
3. برای پایش علائم، ایجنت از `/v1/memory/{user}/query` با فیلتر حساسیت `<= high` استفاده کرده و نتایج را در داشبورد نمایش می‌دهد.
4. کاربر هنگام تغییر پزشک، رضایت را درجا لغو می‌کند؛ دسترسی ایجنت مسدود و رخداد در ممیزی ثبت می‌شود.
**نیازمندی‌های خاص:** ردگیری نسخهٔ داده، هشدار دسترسی مشکوک، احراز هویت قوی ایجنت.

## ۲. تحلیل مالی چندمنظوره
**بازیگران:** کاربر، ایجنت حسابدار، شرکت فین‌تک.
**جریان اصلی:**
1. شرکت فین‌تک با توکن کلاینت خود برای کاربر دعوت ارسال می‌کند.
2. کاربر Scopeهای «memory.read/search» با حساسیت «medium» را برای ایجنت حسابدار فعال می‌کند.
3. ایجنت تراکنش‌های بانکی را ذخیره و هنگام تحلیل بودجه از جست‌وجوی هیبریدی بهره می‌گیرد.
4. خروجی تحلیل به‌صورت ورودی جدید با حساسیت «low» ذخیره می‌شود تا سایر ایجنت‌ها از بینش استفاده کنند.
**نیازمندی‌های خاص:** محدودسازی نرخ درخواست، سیاست نگهداری دادهٔ ۱۸۰روزه، گزارش ممیزی برای سازمان حسابرسی.

## ۳. تجربهٔ شخصی‌سازی‌شدهٔ یادگیری
**بازیگران:** کاربر، ایجنت آموزشی، پلتفرم محتوا.
**جریان اصلی:**
1. کاربر برای ایجنت آموزشی Scope «memory.read» با حساسیت «low/medium» فعال می‌کند.
2. ایجنت به کمک `/v1/memory/{user}/entries?type=preference` علایق یادگیری را دریافت می‌کند.
3. بر اساس نتایج جست‌وجو، مسیر یادگیری توصیه و در قالب ورودی جدید ثبت می‌شود.
4. هنگام لغو اشتراک پلتفرم، کاربر درخواست «Right to Forget» ثبت کرده و کل مسیر یادگیری حذف و در ممیزی درج می‌شود.
**نیازمندی‌های خاص:** SLA پاسخ < ۳۰۰ms برای توصیهٔ لحظه‌ای، قابلیت حذف کامل و قابل اثبات.

## ۴. شبکهٔ پشتیبانی اضطراری
**بازیگران:** کاربر، ایجنت بحران، مرکز تماس.
**جریان اصلی:**
1. کاربر اطلاعات تماس اضطراری، شرایط پزشکی و دستورالعمل‌ها را با حساسیت «critical» (زیرمجموعهٔ high) ثبت می‌کند.
2. مرکز تماس تنها در زمان فعال‌سازی وضعیت اضطراری، توکن short-lived با Scope «memory.read» برای حساسیت «critical» دریافت می‌کند.
3. پس از استفاده، رخداد در ممیزی ثبت و داده‌ها برای بازبینی تیم امنیت علامت‌گذاری می‌شود.
**نیازمندی‌های خاص:** دسترسی مبتنی بر رویداد، انقضای خودکار توکن، هشدار SMS به کاربر.

## ۵. بورد دانش تیمی شرکت
**بازیگران:** شرکت، چند ایجنت داخلی، کاربر کارمند.
**جریان اصلی:**
1. شرکت برای کارمند خود حساب کاربری ایجاد و رضایت داخلی برای اشتراک دانش سازمانی تعریف می‌کند.
2. ایجنت‌های داخلی با Scope «memory.write» اسناد و یادداشت‌های کاری را ذخیره می‌کنند.
3. کارکنان جدید با Scope «memory.read» نتایج بازیابی را می‌بینند و می‌توانند دیدگاه خود را اضافه کنند.
4. هنگام خروج کارمند، دسترسی‌ها لغو و داده‌های شخصی حساس با درخواست کاربر حذف می‌شود.
**نیازمندی‌های خاص:** تفکیک دادهٔ سازمانی و شخصی، گزارش‌گیری از مصرف API، هشدار نقض سیاست.

## نیازمندی‌های مشترک سناریوها
* مدیریت سطوح حساسیت (low/medium/high/critical) با سیاست‌های ABAC.
* گارانتی حذف و پاک‌سازی کش در کمتر از ۳۰ ثانیه پس از لغو رضایت.
* ممیزی جامع با امکان فیلتر براساس ایجنت، Scope و حساسیت.
* SDK و مستندات فارسی برای ادغام سریع شرکت‌ها.
